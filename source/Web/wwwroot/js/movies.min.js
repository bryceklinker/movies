!function(n){var e=n.module("movies",[]);e.constant("config",{apiUrl:"http://localhost:8181"}),e.constant("events",{searchFinished:"SearchFinished",playMovie:"PlayMovie"}),e.config(["$sceProvider",function(n){n.enabled(!1)}])}(angular=window.angular||{}),function(n){var e=function(n,e){this._event=n,this._callback=e};e.prototype.handles=function(n){return this._event===n},e.prototype.handle=function(n){this._callback(n)};var o=function(){this._subscribers=[]};o.prototype.subscribe=function(n,o){var i=new e(n,o);this._subscribers.push(i)},o.prototype.publish=function(n,e){for(var o=this._subscribers.length,i=0;o>i;i++){var r=this._subscribers[i];r.handles(n)&&r.handle(e)}};var i=void 0;n.module("movies").factory("eventBus",function(){return void 0===i&&(i=new o),i})}(angular=window.angular||{}),function(n){n.module("movies").controller("playerController",["$scope","config","events","eventBus",function(n,e,o,i){function r(o){n.videoSource=e.apiUrl+"/play/"+o.title}i.subscribe(o.playMovie,r)}])}(angular=window.angular||{}),function(n){n.module("movies").controller("searchFormController",["$scope","$http","config","events","eventBus",function(n,e,o,i,r){function t(n){r.publish(i.searchFinished,n)}function s(){n.error="Your search failed!"}var a=function(){var i=o.apiUrl+"/search?title="+n.title;e.get(i).success(t).error(s)};n.search=a}])}(angular=window.angular||{}),function(n){n.module("movies").controller("searchResultsController",["$scope","events","eventBus",function(n,e,o){function i(e){n.movies=e.movies}n.play=function(n){o.publish(e.playMovie,n)},o.subscribe(e.searchFinished,i)}])}(angular=window.angular||{});